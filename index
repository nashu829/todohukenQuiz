<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æœ¬ã®47éƒ½é“åºœçœŒã‚¯ã‚¤ã‚º</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Kosugi Maru', sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f8ff;
            color: #333;
        }
        h1 {
            color: #ff6b6b;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            font-size: 2.5em;
            margin-bottom: 20px;
        }
        #map {
            width: 100%;
            max-width: 800px;
            height: 500px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        #quiz-container {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 100%;
        }
        #question {
            color: #4ecdc4;
            font-size: 1.5em;
            margin-bottom: 20px;
        }
        button {
            background-color: #ffd93d;
            border: none;
            color: #333;
            padding: 10px 20px;
            font-size: 1em;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Kosugi Maru', sans-serif;
            margin: 10px 5px;
        }
        button:hover {
            background-color: #ffc107;
            transform: translateY(-2px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        #info {
            margin-top: 20px;
            text-align: left;
            background-color: #e9f7ef;
            padding: 15px;
            border-radius: 10px;
        }
        #info h3 {
            color: #ff6b6b;
            margin-top: 0;
        }
        .highlight {
            background-color: #fff176;
            padding: 2px 5px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1>ğŸ—¾ æ—¥æœ¬ã®47éƒ½é“åºœçœŒã‚¯ã‚¤ã‚º ğŸ—¾</h1>
    <div id="map"></div>
    <div id="quiz-container">
        <h2 id="question"></h2>
        <button id="check-answer" style="display:none;">å›ç­”ã‚’ç¢ºèª</button>
        <button id="next" onclick="nextQuestion()" style="display: none;">æ¬¡ã®å•é¡Œ</button>
        <div id="info"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
    <script>
        let currentIndex = 0;
        let score = 0;
        let map;
        let geojson;
        let selectedPrefecture = null;

        const prefectures = [
    { name: "åŒ—æµ·é“", specialties: ["ã‚¸ãƒ³ã‚®ã‚¹ã‚«ãƒ³", "æœ­å¹Œãƒ©ãƒ¼ãƒ¡ãƒ³", "ã„ãã‚‰"], attraction: "æœ­å¹Œæ™‚è¨ˆå°", worldHeritage: "çŸ¥åºŠ", historicalEvent: "1869å¹´ã«é–‹æ‹“ä½¿ãŒè¨­ç½®" },
    { name: "é’æ£®çœŒ", specialties: ["ã‚Šã‚“ã”", "å¤§é–“ã¾ãã‚", "åå’Œç”°ãƒãƒ©ç„¼ã"], attraction: "é’å‡½é€£çµ¡èˆ¹ãƒ¡ãƒ¢ãƒªã‚¢ãƒ«ã‚·ãƒƒãƒ—å…«ç”²ç”°ä¸¸", worldHeritage: "ç™½ç¥å±±åœ°", historicalEvent: "1871å¹´ã«é’æ£®çœŒãŒè¨­ç½®" },
    { name: "å²©æ‰‹çœŒ", specialties: ["ã‚ã‚“ã“ãã°", "å—éƒ¨ã›ã‚“ã¹ã„", "å‰æ²¢ç‰›"], attraction: "ä¸­å°Šå¯ºé‡‘è‰²å ‚", worldHeritage: "å¹³æ³‰", historicalEvent: "1876å¹´ã«å²©æ‰‹çœŒãŒæˆç«‹" },
    { name: "å®®åŸçœŒ", specialties: ["ç‰›ã‚¿ãƒ³", "ãšã‚“ã é¤…", "ç¬¹ã‹ã¾ã¼ã“"], attraction: "æ¾å³¶", worldHeritage: "ãªã—", historicalEvent: "1871å¹´ã«å®®åŸçœŒãŒè¨­ç½®" },
    { name: "ç§‹ç”°çœŒ", specialties: ["ãã‚ŠãŸã‚“ã½", "ç¨²åº­ã†ã©ã‚“", "ã—ã‚‡ã£ã¤ã‚‹"], attraction: "è§’é¤¨", worldHeritage: "ç™½ç¥å±±åœ°", historicalEvent: "1871å¹´ã«ç§‹ç”°çœŒãŒè¨­ç½®" },
    { name: "å±±å½¢çœŒ", specialties: ["ã•ãã‚‰ã‚“ã¼", "èŠ‹ç…®", "ç±³æ²¢ç‰›"], attraction: "å±±å¯º", worldHeritage: "ãªã—", historicalEvent: "1876å¹´ã«å±±å½¢çœŒãŒæˆç«‹" },
    { name: "ç¦å³¶çœŒ", specialties: ["æ¡ƒ", "å–œå¤šæ–¹ãƒ©ãƒ¼ãƒ¡ãƒ³", "ä¼šæ´¥å¡—"], attraction: "é¶´ãƒ¶åŸ", worldHeritage: "ãªã—", historicalEvent: "1876å¹´ã«ç¦å³¶çœŒãŒæˆç«‹" },
    { name: "èŒ¨åŸçœŒ", specialties: ["ç´è±†", "ã‚ã‚“ã“ã†", "ãƒ¡ãƒ­ãƒ³"], attraction: "å•æ¥½åœ’", worldHeritage: "ãªã—", historicalEvent: "1875å¹´ã«èŒ¨åŸçœŒãŒæˆç«‹" },
    { name: "æ ƒæœ¨çœŒ", specialties: ["ã„ã¡ã”", "å®‡éƒ½å®®é¤ƒå­", "æ—¥å…‰ã‚†ã°"], attraction: "æ—¥å…‰æ±ç…§å®®", worldHeritage: "æ—¥å…‰ã®ç¤¾å¯º", historicalEvent: "1873å¹´ã«æ ƒæœ¨çœŒãŒæˆç«‹" },
    { name: "ç¾¤é¦¬çœŒ", specialties: ["ã“ã‚“ã«ã‚ƒã", "ç„¼ã¾ã‚“ã˜ã‚…ã†", "ä¸Šå·ç‰›"], attraction: "è‰æ´¥æ¸©æ³‰", worldHeritage: "å¯Œå²¡è£½ç³¸å ´ã¨çµ¹ç”£æ¥­éºç”£ç¾¤", historicalEvent: "1876å¹´ã«ç¾¤é¦¬çœŒãŒæˆç«‹" },
    { name: "åŸ¼ç‰çœŒ", specialties: ["æ·±è°·ã­ã", "è‰åŠ ã›ã‚“ã¹ã„", "å·è¶ŠèŠ‹"], attraction: "å·è¶Šè”µé€ ã‚Šã®ç”ºä¸¦ã¿", worldHeritage: "ãªã—", historicalEvent: "1871å¹´ã«åŸ¼ç‰çœŒãŒè¨­ç½®" },
    { name: "åƒè‘‰çœŒ", specialties: ["è½èŠ±ç”Ÿ", "ãƒ”ãƒ¼ãƒŠãƒƒãƒ„ãƒã‚¿ãƒ¼", "ã³ã‚"], attraction: "æ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒªã‚¾ãƒ¼ãƒˆ", worldHeritage: "ãªã—", historicalEvent: "1873å¹´ã«åƒè‘‰çœŒãŒæˆç«‹" },
    { name: "æ±äº¬éƒ½", specialties: ["ç¯‰åœ°ã®å¯¿å¸", "ã‚‚ã‚“ã˜ã‚ƒç„¼ã", "æ±äº¬ã°ãªå¥ˆ"], attraction: "æ±äº¬ã‚¹ã‚«ã‚¤ãƒ„ãƒªãƒ¼", worldHeritage: "ãªã—", historicalEvent: "1868å¹´ã«æ±Ÿæˆ¸ã‹ã‚‰æ±äº¬ã«æ”¹ç§°" },
    { name: "ç¥å¥ˆå·çœŒ", specialties: ["æ¨ªæµœä¸­è¯è¡—ã®ä¸­è¯æ–™ç†", "ã‚·ã‚¦ãƒã‚¤", "æ¹˜å—ã—ã‚‰ã™"], attraction: "æ¨ªæµœã¿ãªã¨ã¿ã‚‰ã„21", worldHeritage: "ãªã—", historicalEvent: "1876å¹´ã«ç¥å¥ˆå·çœŒãŒæˆç«‹" },
    { name: "æ–°æ½ŸçœŒ", specialties: ["ã‚³ã‚·ãƒ’ã‚«ãƒª", "ã¸ããã°", "ç¬¹å›£å­"], attraction: "ä½æ¸¡é‡‘å±±", worldHeritage: "ãªã—", historicalEvent: "1876å¹´ã«æ–°æ½ŸçœŒãŒæˆç«‹" },
    { name: "å¯Œå±±çœŒ", specialties: ["ã¾ã™å¯¿ã—", "ç™½ã‚¨ãƒ“", "é»’éƒ¨åæ°´ãƒãƒ¼ã‚¯"], attraction: "ç«‹å±±é»’éƒ¨ã‚¢ãƒ«ãƒšãƒ³ãƒ«ãƒ¼ãƒˆ", worldHeritage: "äº”ç®‡å±±ã®åˆæŒé€ ã‚Šé›†è½", historicalEvent: "1883å¹´ã«å¯Œå±±çœŒãŒæˆç«‹" },
    { name: "çŸ³å·çœŒ", specialties: ["åŠ è³€é‡èœ", "é‡‘æ²¢ã‚«ãƒ¬ãƒ¼", "åŠ èƒ½ã‚¬ãƒ‹"], attraction: "å…¼å…­åœ’", worldHeritage: "ãªã—", historicalEvent: "1871å¹´ã«çŸ³å·çœŒãŒè¨­ç½®" },
    { name: "ç¦äº•çœŒ", specialties: ["è¶Šå‰ãŒã«", "ã‚½ãƒ¼ã‚¹ã‚«ãƒ„ä¸¼", "è‹¥ç‹­å¡—"], attraction: "æ±å°‹åŠ", worldHeritage: "ãªã—", historicalEvent: "1881å¹´ã«ç¦äº•çœŒãŒæˆç«‹" },
    { name: "å±±æ¢¨çœŒ", specialties: ["ã»ã†ã¨ã†", "ä¿¡ç„é¤…", "ç”²å·ãƒ¯ã‚¤ãƒ³"], attraction: "å¯Œå£«äº”æ¹–", worldHeritage: "å¯Œå£«å±±", historicalEvent: "1871å¹´ã«å±±æ¢¨çœŒãŒè¨­ç½®" },
    { name: "é•·é‡çœŒ", specialties: ["ä¿¡å·ãã°", "ã‚Šã‚“ã”", "é‡æ²¢èœ"], attraction: "æ¾æœ¬åŸ", worldHeritage: "ãªã—", historicalEvent: "1871å¹´ã«é•·é‡çœŒãŒè¨­ç½®" },
    { name: "å²é˜œçœŒ", specialties: ["é£›é¨¨ç‰›", "æœ´è‘‰ã¿ã", "æŸ¿"], attraction: "ç™½å·éƒ·", worldHeritage: "ç™½å·éƒ·ãƒ»äº”ç®‡å±±ã®åˆæŒé€ ã‚Šé›†è½", historicalEvent: "1871å¹´ã«å²é˜œçœŒãŒè¨­ç½®" },
    { name: "é™å²¡çœŒ", specialties: ["é™å²¡èŒ¶", "ã†ãªããƒ‘ã‚¤", "æ¡œãˆã³"], attraction: "å¯Œå£«å±±", worldHeritage: "å¯Œå£«å±±", historicalEvent: "1876å¹´ã«é™å²¡çœŒãŒæˆç«‹" },
    { name: "æ„›çŸ¥çœŒ", specialties: ["ã²ã¤ã¾ã¶ã—", "å‘³å™Œã‚«ãƒ„", "åå¤å±‹ã‚³ãƒ¼ãƒãƒ³"], attraction: "åå¤å±‹åŸ", worldHeritage: "ãªã—", historicalEvent: "1871å¹´ã«æ„›çŸ¥çœŒãŒè¨­ç½®" },
    { name: "ä¸‰é‡çœŒ", specialties: ["æ¾é˜ªç‰›", "ä¼Šå‹¢ã†ã©ã‚“", "ã‚ãŠã•ã®ã‚Š"], attraction: "ä¼Šå‹¢ç¥å®®", worldHeritage: "ç†Šé‡å¤é“", historicalEvent: "1876å¹´ã«ä¸‰é‡çœŒãŒæˆç«‹" },
    { name: "æ»‹è³€çœŒ", specialties: ["è¿‘æ±Ÿç‰›", "é®’å¯¿å¸", "è¿‘æ±ŸèŒ¶"], attraction: "å½¦æ ¹åŸ", worldHeritage: "ãªã—", historicalEvent: "1872å¹´ã«æ»‹è³€çœŒãŒæˆç«‹" },
    { name: "äº¬éƒ½åºœ", specialties: ["å…«ã¤æ©‹", "æ¹¯è‘‰", "æŠ¹èŒ¶"], attraction: "é‡‘é–£å¯º", worldHeritage: "å¤éƒ½äº¬éƒ½ã®æ–‡åŒ–è²¡", historicalEvent: "794å¹´ã«å¹³å®‰äº¬é·éƒ½" },
    { name: "å¤§é˜ªåºœ", specialties: ["ãŸã“ç„¼ã", "ãŠå¥½ã¿ç„¼ã", "ä¸²ã‚«ãƒ„"], attraction: "å¤§é˜ªåŸ", worldHeritage: "ãªã—", historicalEvent: "1868å¹´ã«å¤§é˜ªåºœãŒè¨­ç½®" },
    { name: "å…µåº«çœŒ", specialties: ["ç¥æˆ¸ç‰›", "æ˜çŸ³ç„¼ã", "æ’­å·ãã†ã‚ã‚“"], attraction: "å§«è·¯åŸ", worldHeritage: "å§«è·¯åŸ", historicalEvent: "1871å¹´ã«å…µåº«çœŒãŒè¨­ç½®" },
    { name: "å¥ˆè‰¯çœŒ", specialties: ["å¥ˆè‰¯æ¼¬ã‘", "æŸ¿ã®è‘‰å¯¿å¸", "ä¸‰è¼ªãã†ã‚ã‚“"], attraction: "æ±å¤§å¯º", worldHeritage: "å¤éƒ½å¥ˆè‰¯ã®æ–‡åŒ–è²¡", historicalEvent: "710å¹´ã«å¹³åŸäº¬é·éƒ½" },
    { name: "å’Œæ­Œå±±çœŒ", specialties: ["æ¢…å¹²ã—", "ã¿ã‹ã‚“", "ã‚¯ã‚¨é‹"], attraction: "é«˜é‡å±±", worldHeritage: "ç´€ä¼Šå±±åœ°ã®éœŠå ´ã¨å‚è©£é“", historicalEvent: "1871å¹´ã«å’Œæ­Œå±±çœŒãŒè¨­ç½®" },
    { name: "é³¥å–çœŒ", specialties: ["æ¾è‘‰ãŒã«", "äºŒåä¸–ç´€æ¢¨", "ç ‚ä¸˜ã‚‰ã£ãã‚‡ã†"], attraction: "é³¥å–ç ‚ä¸˜", worldHeritage: "ãªã—", historicalEvent: "1881å¹´ã«é³¥å–çœŒãŒæˆç«‹" },
    { name: "å³¶æ ¹çœŒ", specialties: ["å‡ºé›²ãã°", "å®é“æ¹–ã—ã˜ã¿", "ã®ã©ãã‚"], attraction: "å‡ºé›²å¤§ç¤¾", worldHeritage: "çŸ³è¦‹éŠ€å±±éºè·¡ã¨ãã®æ–‡åŒ–çš„æ™¯è¦³", historicalEvent: "1871å¹´ã«å³¶æ ¹çœŒãŒè¨­ç½®" },
    { name: "å²¡å±±çœŒ", specialties: ["æ¡ƒ", "ãƒã‚¹ã‚«ãƒƒãƒˆ", "ã¾ã¾ã‹ã‚Š"], attraction: "å€‰æ•·ç¾è¦³åœ°åŒº", worldHeritage: "ãªã—", historicalEvent: "1871å¹´ã«å²¡å±±çœŒãŒè¨­ç½®" },
    { name: "åºƒå³¶çœŒ", specialties: ["ãŠå¥½ã¿ç„¼ã", "ã‚‚ã¿ã˜é¥…é ­", "ç‰¡è £"], attraction: "å³å³¶ç¥ç¤¾", worldHeritage: "åŸçˆ†ãƒ‰ãƒ¼ãƒ ", historicalEvent: "1871å¹´ã«åºƒå³¶çœŒãŒè¨­ç½®" },
    { name: "å±±å£çœŒ", specialties: ["ãµã", "ç“¦ãã°", "å²©å›½ã‚Œã‚“ã“ã‚“"], attraction: "ç§‹å‰å°", worldHeritage: "ãªã—", historicalEvent: "1871å¹´ã«å±±å£çœŒãŒè¨­ç½®" },
    { name: "å¾³å³¶çœŒ", specialties: ["ã™ã ã¡", "é³´é–€ã‚ã‹ã‚", "é³´é–€é‡‘æ™‚"], attraction: "é³´é–€ã®æ¸¦æ½®", worldHeritage: "ãªã—", historicalEvent: "1880å¹´ã«å¾³å³¶çœŒãŒæˆç«‹" },
    { name: "é¦™å·çœŒ", specialties: ["è®ƒå²ã†ã©ã‚“", "ã‚ªãƒªãƒ¼ãƒ–", "éª¨ä»˜é³¥"], attraction: "æ —æ—å…¬åœ’", worldHeritage: "ãªã—", historicalEvent: "1888å¹´ã«é¦™å·çœŒãŒæˆç«‹" },
    { name: "æ„›åª›çœŒ", specialties: ["ã¿ã‹ã‚“", "é¯›ã‚ã—", "ã˜ã‚ƒã“å¤©"], attraction: "é“å¾Œæ¸©æ³‰", worldHeritage: "ãªã—", historicalEvent: "1876å¹´ã«æ„›åª›çœŒãŒæˆç«‹" },
    { name: "é«˜çŸ¥çœŒ", specialties: ["ã‚«ãƒ„ã‚ªã®ãŸãŸã", "åœŸä½é…’", "ã‚†ãš"], attraction: "é«˜çŸ¥åŸ", worldHeritage: "ãªã—", historicalEvent: "1876å¹´ã«é«˜çŸ¥çœŒãŒæˆç«‹" },
    { name: "ç¦å²¡çœŒ", specialties: ["æ˜å¤ªå­", "åšå¤šãƒ©ãƒ¼ãƒ¡ãƒ³", "è¾›å­æ˜å¤ªå­"], attraction: "å¤ªå®°åºœå¤©æº€å®®", worldHeritage: "ãªã—", historicalEvent: "1871å¹´ã«ç¦å²¡çœŒãŒè¨­ç½®" },
    { name: "ä½è³€çœŒ", specialties: ["ä½è³€ç‰›", "å‘¼å­ã‚¤ã‚«", "ä½è³€ã®ã‚Š"], attraction: "å‰é‡ãƒ¶é‡Œéºè·¡", worldHeritage: "ãªã—", historicalEvent: "1883å¹´ã«ä½è³€çœŒãŒæˆç«‹" },
    { name: "é•·å´çœŒ", specialties: ["ã‚«ã‚¹ãƒ†ãƒ©", "ã¡ã‚ƒã‚“ã½ã‚“", "è§’ç…®ã¾ã‚“ã˜ã‚…ã†"], attraction: "ã‚°ãƒ©ãƒãƒ¼åœ’", worldHeritage: "é•·å´ã¨å¤©è‰åœ°æ–¹ã®æ½œä¼ã‚­ãƒªã‚·ã‚¿ãƒ³é–¢é€£éºç”£", historicalEvent: "1871å¹´ã«é•·å´çœŒãŒè¨­ç½®" },
    { name: "ç†Šæœ¬çœŒ", specialties: ["é¦¬åˆºã—", "è¾›å­ã‚Œã‚“ã“ã‚“", "é˜¿è˜‡ã®èµ¤ç‰›"], attraction: "ç†Šæœ¬åŸ", worldHeritage: "ãªã—", historicalEvent: "1871å¹´ã«ç†Šæœ¬çœŒãŒè¨­ç½®" },
    { name: "å¤§åˆ†çœŒ", specialties: ["ã¨ã‚Šå¤©", "é–¢ã•ã°", "åŸä¸‹ã‹ã‚Œã„"], attraction: "åˆ¥åºœæ¸©æ³‰", worldHeritage: "ãªã—", historicalEvent: "1876å¹´ã«å¤§åˆ†çœŒãŒæˆç«‹" },
    { name: "å®®å´çœŒ", specialties: ["ãƒã‚­ãƒ³å—è›®", "å†·ã‚„æ±", "æ—¥å‘å¤"], attraction: "ã‚µãƒ³ãƒ¡ãƒƒã‚»æ—¥å—", worldHeritage: "ãªã—", historicalEvent: "1883å¹´ã«å®®å´çœŒãŒæˆç«‹" },
    { name: "é¹¿å…å³¶çœŒ", specialties: ["é»’è±š", "ã•ã¤ã¾ã‚ã’", "ç„¼é…"], attraction: "æ¡œå³¶", worldHeritage: "å±‹ä¹…å³¶", historicalEvent: "1871å¹´ã«é¹¿å…å³¶çœŒãŒè¨­ç½®" },
    { name: "æ²–ç¸„çœŒ", specialties: ["ã‚´ãƒ¼ãƒ¤ãƒ¼ãƒãƒ£ãƒ³ãƒ—ãƒ«ãƒ¼", "æµ·ã¶ã©ã†", "ã‚µãƒ¼ã‚¿ãƒ¼ã‚¢ãƒ³ãƒ€ã‚®ãƒ¼"], attraction: "é¦–é‡ŒåŸ", worldHeritage: "ç‰çƒç‹å›½ã®ã‚°ã‚¹ã‚¯åŠã³é–¢é€£éºç”£ç¾¤", historicalEvent: "1972å¹´ã«æ—¥æœ¬å¾©å¸°" }
];

        async function initMap() {
            map = L.map('map').setView([37.0, 138.0], 5);
            
            L.tileLayer('https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
                subdomains: 'abcd',
                maxZoom: 20
            }).addTo(map);

            try {
                const response = await fetch('https://raw.githubusercontent.com/dataofjapan/land/master/japan.geojson');
                const data = await response.json();

                geojson = L.geoJSON(data, {
                    style: function(feature) {
                        return {
                            fillColor: '#f0f0f0',
                            weight: 1,
                            opacity: 1,
                            color: 'white',
                            fillOpacity: 0.7
                        };
                    },
                    onEachFeature: function(feature, layer) {
                        layer.on('click', function() {
                            if (selectedPrefecture) {
                                geojson.resetStyle(selectedPrefecture);
                            }
                            layer.setStyle({
                                fillColor: '#ff9999'
                            });
                            selectedPrefecture = layer;
                            document.getElementById('check-answer').style.display = 'inline-block';
                        });
                    }
                }).addTo(map);
            } catch (error) {
                console.error("Error loading GeoJSON data:", error);
            }
        }

        function updateQuestion() {
            document.getElementById('question').textContent = `ç¬¬${currentIndex + 1}å•: ${prefectures[currentIndex].name}ã¯ã©ã“ï¼Ÿåœ°å›³ä¸Šã§ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚`;
            document.getElementById('info').innerHTML = '';
            document.getElementById('check-answer').style.display = 'none';
            document.getElementById('next').style.display = 'none';
            
            if (selectedPrefecture) {
                geojson.resetStyle(selectedPrefecture);
                selectedPrefecture = null;
            }
        }

        function checkAnswer() {
            const info = document.getElementById('info');
            
            if (!selectedPrefecture) {
                info.innerHTML = '<h3>éƒ½é“åºœçœŒã‚’é¸æŠã—ã¦ãã ã•ã„</h3>';
                return;
            }

            const selectedName = selectedPrefecture.feature.properties.nam_ja;
            const correctName = prefectures[currentIndex].name;
            
            const normalizePrefix = (name) => name.replace(/(éƒ½|åºœ|çœŒ)$/, '');
            
            const isCorrect = normalizePrefix(selectedName) === normalizePrefix(correctName);
            
            if (isCorrect) {
                score++;
                info.innerHTML = '<h3>æ­£è§£ï¼</h3>';
            } else {
                info.innerHTML = '<h3>ä¸æ­£è§£</h3>';
                geojson.eachLayer(function(layer) {
                    if (normalizePrefix(layer.feature.properties.nam_ja) === normalizePrefix(correctName)) {
                        layer.setStyle({
                            fillColor: '#66ff66'
                        });
                    }
                });
            }
            
            info.innerHTML += `
                <p><span class="highlight">æ­£è§£: ${prefectures[currentIndex].name}</span></p>
                <p>åç”£å“: ${prefectures[currentIndex].specialties.join(', ')}</p>
                <p>è¦³å…‰åæ‰€: ${prefectures[currentIndex].attraction}</p>
                <p>ä¸–ç•Œéºç”£: ${prefectures[currentIndex].worldHeritage}</p>
                <p>æ­´å²çš„å‡ºæ¥äº‹: ${prefectures[currentIndex].historicalEvent}</p>
            `;
            document.getElementById('next').style.display = 'inline-block';
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < prefectures.length) {
                updateQuestion();
            } else {
                document.getElementById('quiz-container').innerHTML = `<h2>ã‚¯ã‚¤ã‚ºçµ‚äº†ï¼</h2><p>ã‚ãªãŸã®æœ€çµ‚ã‚¹ã‚³ã‚¢ã¯ ${score} / ${prefectures.length} ã§ã™ã€‚</p>`;
            }
        }

        document.getElementById('check-answer').addEventListener('click', checkAnswer);

        initMap().then(updateQuestion);
    </script>
</body>
</html>
